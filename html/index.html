<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BBQueue</title>

    <link rel="stylesheet" type="text/css" href="dygraph.css"/>
    <link rel="stylesheet" type="text/css" href="rtgraph.css"/>

    <script type="text/javascript" src="dygraph.min.js"></script>
    <script type="text/javascript" src="msgpack.min.js"></script>
    <script type="text/javascript" src="rtgraph.js"></script>

    <style>
        table {
            border-collapse: collapse;
            border: 2px solid #ccc;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        .center {
            text-align: center;
            font-style: italic;
        }
    </style>

    <script type="text/javascript">
        const second = 1000;
        const minute = 60 * second;
        const hour = 60 * minute;

        Dygraph.onDOMready(function onDOMready() {
            function CtoF(t) {
                return t * 1.8 + 32;
            }

            new Graph(document.getElementById("graphdiv0"), {
                seriesNames: [
                    "bbqueue_bbq01_meat | avg 30s"
                ],
                title: "bbq01 meat (10 min view): {value}",
                ylabel: "temperature (F)",
                labels: ["x", "y1"],
                windowSize: 10 * minute,
                mappers: [CtoF],
                height: 300,
                maxGapMs: 10 * second
            });

            new Graph(document.getElementById("graphdiv1"), {
                seriesNames: [
                    "bbqueue_bbq01_bbq | avg 10m",
                    "bbqueue_bbq01_bbq"
                ],
                title: "bbq01 bbq (10 min view): {value}",
                ylabel: "temperature (F)",
                labels: ["x", "y1", "y2"],
                windowSize: 10 * minute,
                mappers: [CtoF],
                height: 300,
                series: {y2: {strokeWidth: 1}},
                maxGapMs: 10 * second
            });

            new Graph(document.getElementById("graphdiv2"), {
                seriesNames: [
                    "bbqueue_bbq01_meat | avg 30s"
                ],
                title: "bbq01 meat (24 hr view): {value}",
                ylabel: "temperature (F)",
                labels: ["x", "y1"],
                mappers: [CtoF],
                includeZero: false,
                height: 150,
                windowSize: 24 * hour,
                maxGapMs: 10 * second
            });

            new Graph(document.getElementById("graphdiv3"), {
                seriesNames: [
                    "bbqueue_bbq01_bbq | avg 10m",
                    "bbqueue_bbq01_bbq"
                ],
                title: "bbq01 bbq (24 hr view): {value}",
                ylabel: "temperature (F)",
                labels: ["x", "y1", "y2"],
                mappers: [CtoF],
                includeZero: false,
                height: 150,
                windowSize: 24 * hour,
                series: {y2: {strokeWidth: 1}},
                maxGapMs: 10 * second
            });

            new Graph(document.getElementById("graphdiv4"), {
                seriesNames: [
                    "bbqueue_bbq01_voltage | avg 30s"
                ],
                title: "bbq01 battery voltage (24 hr view): {value}",
                ylabel: "voltage (V)",
                labels: ["x", "y1"],
                includeZero: false,
                height: 150,
                windowSize: 24 * hour,
                maxGapMs: 10 * second
            });
        });
    </script>
</head>
<body>
<!--<table>-->
<!--    <tr>-->
<!--        <th>Probe Name</th>-->
<!--        <th>Temp (Â°F)</th>-->
<!--        <th>Last Update</th>-->
<!--    </tr>-->

<!--    {{$now := .now}}-->
<!--    {{range $i, $d := .data}}-->
<!--    <tr>-->
<!--        <td>{{$d.ProbeID}}</td>-->
<!--        <td>{{FmtTemp $d.Temp}}</td>-->
<!--        <td>{{LastUpdated $d.Time $now}}</td>-->
<!--    </tr>-->
<!--    {{end}}-->
<!--</table>-->


<div class="container">
    <div id="graphdiv0" class="column"></div>
    <div id="graphdiv1" class="column"></div>
</div>

<div id="graphdiv2" class="wide"></div>
<div id="graphdiv3" class="wide"></div>
<div id="graphdiv4" class="wide"></div>

</body>
</html>
